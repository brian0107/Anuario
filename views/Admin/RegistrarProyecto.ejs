<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"/>
    <title>Anuario: Registrar Proyecto</title>
  </head>
  <body>
    <div style="padding: 0px 75px 0px 80px;" class="container-sm"> 
      <%- include('Header.ejs') %>

      <h2 style="text-align: center; margin-top: 10px;"><%= proyecto.Id ? 'Actualizar Proyecto' : 'Registrar Proyecto' %></h2>
      <a style="margin-bottom: 10px;" class="btn btn-primary" href="/Proyectos">Volver</a> <!--Boton volver -->
      
      <div class="form">

        <form method="post" enctype="multipart/form-data">

          <input type="hidden" name="id" value="<%= proyecto.Id || '' %>">
        
          <div class="form-floating mb-3">
            <input
              type="text"
              class="form-control"
              id="nombre"
              name="Nombre"
              placeholder="Nombre de Proyecto"
              autocomplete="off"
              value="<%= proyecto.Nombre || '' %>"
              required
            />
            <label for="nombre">Nombre</label>
            
          </div>
  
          <div class="form-floating mb-3">
            <select name="Autor" class="form-select" required>
                <option value="" disabled selected>-- Abra este Menú de Selección --</option>
                <%alumnos.forEach(alumno =>{%>
                    <option value="<%= alumno.numControl%>" <%= proyecto.Autor===alumno.numControl ? 'selected' : '' %> ><%= alumno.nombreCompleto%></option>
                    <%})%>
                </select>
                <label>Autor</label>
          </div>

          <div class="form-floating mb-3">
           
            <input type="file" class="form-control" id="imagen"name="file" required />
            <label for="imagen">Imagen</label>
            <% if (proyecto.Imagen) { %>
              <div style="width: 100px; height: auto;">
               <img src="/img/<%=proyecto.Imagen%>" class="img-thumbnail"> <!-- Esta clase hace mas pequeña la imagen. -->
               </div>
               <% } %>
               
          </div>
  
          <div class="form-floating mb-3">
            
            <input
              id="descripcion"
              type="textarea"
              class="form-control"
              name="Descripcion"
              placeholder="Descripcion del Proyecto"
              autocomplete="off"
              value="<%= proyecto.Descripcion || '' %>"
              required
              >
              <label for="descripcion">Descripción</label>
          </div>
  
          <input type="submit" class="btn btn-success btn-lg" value="<%= proyecto.Id ? 'Actualizar' : 'Registrar' %>" />
        </form>

      </div> <!--Fin Formulario-->
      
    </div> <!--Fin contenedor-->
  </body>
</html>
